# Adjust

## Why combine Adjust and Purchasely?

### Pre-requisites

The minimal version of the Purchasely SDK supporting this integration is v3.2.0. If the Purchasely SDK integrated in your app is under the minimal version, please update it.

The Adjust SDK also needs to be integrated inside the app.

### Subscription events

### General overview

[Adjust](https://www.adjust.com/) is one of the leading MMP (Mobile Measurement Partner): a third-party attribution company that collects, organizes, and presents data from marketing campaigns in order to provide brands with a unified view of their campaign performance.

This integration will allow you to track your subscriptions and in-app purchases events in your Adjust Dashboard.

Purchasely provides a unified dataset to track the subscription events for all stores. These events are generated by the Purchasely Backend and can be sent to Adjust.

![](<../.gitbook/assets/image (143).png>)

Subscription events generated by Purchasely will be sent to Adjust using a server-to-server integration. As a result, you will be able to see all the subscription events in your Adjust Dashboard and map them with your acquisition campaigns.

The following events can be sent from Purchasely to Adjust to track your subscribers and associate them to you campaigns. You can find the full list [here](../analytics/events/webhook-events/subscription-events.md).

* `SUBSCRIPTION_STARTED`: Sent when the user purchased a product wether it is the start of a trial or a regular purchase of a consumable product.
* `SUBSCRIPTION_RENEWED`: Sent when a subscription renews
* `TRIAL_STARTED`: Sent when a trial starts
* `TRIAL_CONVERTED`: Sent when a user converts from a free trial to a normal paid-period
* `TRIAL_NOT_CONVERTED`: Sent when a user finishes it's trial period without renewing to a paid-periodYou can also override an event's token for each store, individually, provided you h
* `PURCHASE_VALIDATED`: Sent when a user purchases a one-time purchase (consumable or not consumable)
* `SUBSCRIPTION_REACTIVATED`: Sent when an expired subscription is reactivated. This event is particularly useful for win-back & retargeting campaigns
* `SUBSCRIPTION_REFUNDED_REVOKED`: Sent when a subscription is refunded

Subscription events need to be mapped with an Adjust Token. If an event does not have an associated \[adjust event token], it _**will not**_ be sent.

See _§2. Creating your Adjust `event tokens` in the Adjust Console_ for more details.

## **Integrating Purchasely with Adjust**

The integration requires 3 steps:

1. Associate the user to events by providing the `Adjust ID` to the Purchasely SDK
2. Create the Adjust event token in the Adjust Console
3. Activate the Adjust integration in the Purchasely Console

### 1. Associating users to events

#### Swift

See the \[Adjust Documentation]\([https://help.adjust.com/en/article/gather-device-ids-ios-sdk#gather-adid](https://help.adjust.com/en/article/gather-device-ids-ios-sdk#gather-adid)) for more information

```swift
let adid = Adjust.adid()
Purchasely.setAttribute(.adjustId, value: String(adid))
```

#### Kotlin

See the \[Adjust Documentation]\([https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier](https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier)) for more information

```kotlin
Purchasely.setAttribute(
	Attribute.ADJUST_ID,
	Adjust.getDefaultInstance().getAdid().toString()
)
```

#### Java

See the \[Adjust Documentation]\([https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier](https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier)) for more information

```java
Purchasely.setAttribute(
	Attribute.ADJUST_ID,
	String.valueOf(Adjust.getAdid())
);
```

#### React Native

See the \[Adjust Documentation]\([https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier](https://help.adjust.com/en/article/gather-device-ids-android-sdk#adjust-device-identifier))  for more information

```jsx
var adid = Adjust.getAdid();
Purchasely.setAttribute(Attributes.ADJUST_ID, Adjust.getAdid());
```

***

### 2. Creating your `event tokens` in the Adjust Console

Adjust works with a system of token to track all kind of events (both server and front). These events need to be created in the Adjust Dashboard.

1. Log into your Adjust dashboard: [https://dash.adjust.com/#/login](https://dash.adjust.com/#/login)
2. Access your app’s details using the triangle button

![](<../.gitbook/assets/image (137) (1) (1) (1) (1) (1).png>)

3\. Go to your app’s parameters

![](<../.gitbook/assets/image (119).png>)

4\. Access the Events section

![](<../.gitbook/assets/image (142).png>)

5\. Create your new token. Remember that you can set a token for each Purchasely event, and that each Purchasely event’s token can be overridden for one or all of the stores your app is available on.

{% hint style="info" %}
You will need to repeat the procedure for each event
{% endhint %}

### 3. Activating the Adjust integration

The activation requires 3 steps:

1. Retrieving your app token in the Adjust Dashboard
2. Retrieving your app authentication token in the Adjust Dashboard
3. Enabling the Adjust integration in the Purchasely Console

#### a. Retrieving your app token in the Adjust Dashboard

1. Log into your Adjust dashboard: [https://dash.adjust.com/#/login](https://dash.adjust.com/#/login)
2. Access your app’s details using the triangle button

![](<../.gitbook/assets/image (137) (1) (1) (1) (1).png>)

3\. Your app’s app token is at the top

![](<../.gitbook/assets/image (115).png>)

#### b. Retrieving your app authentication token (optional)

This step is optional but we strongly advise to activate it as it allows to secure and authenticate the integration between Purchasely and Adjust servers.

1. Log into your Adjust dashboard: [https://dash.adjust.com/#/login](https://dash.adjust.com/#/login)
2. Access your app’s details using the triangle button

![](<../.gitbook/assets/image (137) (1) (1) (1).png>)

3\. Go to your app’s parameters

![](<../.gitbook/assets/image (121).png>)

4\. Access the S2S security section

![](<../.gitbook/assets/image (170).png>)

5\. Create a new token and name it

![](<../.gitbook/assets/image (167) (1).png>)

#### c. Enabling the Adjust integration in the Purchasely Console

1. Go in the "External integrations" section, and open the edition form for Adjust:

![](<../.gitbook/assets/image (147) (1).png>)

2\. Enable the integration

3\. Set your Adjust app token

4\. (Optional): Set your Adjust app authentication token

![](<../.gitbook/assets/image (113).png>)

5\. Set the Adjust `event token` for each event you wish to receive in Adjust

6\. (Optional) Set store specific Adjust `event tokens` for some or all of your events.

![](<../.gitbook/assets/image (132).png>)

7\. Save

### Testing your integration

To test your integration, you can perform a set of in-app purchases in a Sandbox environment (eg: TestFlight for the App Store).

If you do so, you will need to create a view in your Adjust Dashboard and check the Sandbox mode

![](<../.gitbook/assets/image (186) (1).png>)

{% hint style="info" %}
Bear in mind that the views in the Adjust Dashboard are not fed in real time and it usually takes a couple of hours before the data is updated.
{% endhint %}
